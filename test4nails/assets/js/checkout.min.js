"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,_toPropertyKey(i.key),i)}}function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"===_typeof(t)?t:String(t)}function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0===o)return("string"===t?String:Number)(e);var i=o.call(e,t||"default");if("object"!==_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}var checkout=document.querySelector(".checkout__container"),currentStep="first",margin=isMobile()?60:150,CURRENT_URL=window.location.href;function validateCheckout(o){$("#ship-to-different-address-checkbox").prop("checked");$("input[name=payment_method]:checked").val();var i=$("form.checkout");i.addClass("processing").append('<div class="blockUI" style="display:none"></div><div class="blockUI blockOverlay firstStepShow" style="z-index: 1000; border: none; margin: 0px; padding: 0px; width: 100%; height: 100%; top: 0px; left: 0px; background: rgb(255, 255, 255); opacity: 0.6; cursor: default; position: absolute;"></div><div class="blockUI blockMsg blockElement" style="z-index: 1011; display: none; position: absolute; left: 296px; top: 337px;"></div></div>');var e={};return i.find(".woocommerce-billing-fields").find("input, select").each(function(){e[$(this).attr("name")]=$(this).val()}),$("#ship-to-different-address-checkbox").prop("checked")&&i.find(".woocommerce-shipping-fields").find("input, select").each(function(){console.log("qwe"),e[$(this).attr("name")]=$(this).val()}),e.ship_to_different_address=+$("#ship-to-different-address-checkbox").prop("checked"),e.woocommerce_checkout_place_order=1,e["woocommerce-process-checkout-nonce"]=$("#woocommerce-process-checkout-nonce").val(),$.ajax({url:"/?wc-ajax=checkout",type:"POST",data:e,dataType:"json",success:function(e){var t=!1;if(i.removeClass("processing").find(".blockUI").remove(),"failure"===e.result?($(".woocommerce-notices-wrapper").hide().html(e.messages),$(".woocommerce-notices-wrapper li").each(function(){"Invalid payment method."===$(this).text().trim()&&(1===$(".woocommerce-notices-wrapper li").length?t=!0:$(this).hide())})):t=!0,!t)return $(".woocommerce-notices-wrapper").show(),$("html, body").animate({scrollTop:$(".woocommerce-error").offset().top-margin},500),!1;$(".woocommerce-notices-wrapper").html(""),i.removeClass("processing").find(".blockUI").remove(),o&&o()}})}function updateSummary(){if($(".checkout-aside").empty(),$("#asideSumm .checkout-aside__container").clone().css("display","block").appendTo(".checkout-aside"),document.querySelector("#asideSumm").classList.contains("ppcp-gateway")){var e=document.querySelector("#asideSumm .checkout-aside__button").innerHTML;document.querySelector("#asideSumm .checkout-aside__button").innerHTML="",document.querySelector(".checkout-aside .checkout-aside__button").innerHTML="",document.querySelector(".checkout-aside .checkout-aside__button").innerHTML=e}}function firstStep(){pasteShippingData(),hideFirstStepBlock(),showSecondStepBlock(),$(".checkout__container").removeClass("hide-second-step"),$(".steps__shipping").addClass("active"),$(".totals__item--shipping").removeClass("d-none"),$(".totals__item--total").removeClass("d-none"),hideThirdStepBlock(),changeCurrentStepClass(currentStep,"second"),currentStep="second",calcCurrentTotalPrice(document.querySelector("#asideSumm .totals__item--shipping").dataset.shipping||0,document.querySelector("#asideSumm .totals__item--tax").dataset.tax||0),$(".steps__payment").removeClass("active"),checkout.dataset.user&&saveUserData()}function calcCurrentTotalPrice(){for(var e=document.querySelector("#asideSumm .totals__item--subtotal").dataset.subtotal,t=document.querySelector(".aside__content #totalPrice bdi"),o=0,i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];for(var r=0,c=s;r<c.length;r++){var a=c[r];o+=Number(a)}var l=(+e+o).toLocaleString("en-US",{style:"currency",currency:"USD"});t.innerHTML=l}function hideFirstStepBlock(){$(".step__diff-addres").hide(),$(".step__fields").slideUp(),$(".aside__content .address-next-step").hide(),$(".step__data").removeClass("step__info--hide"),$(".shipping-title").hide()}function showFirstStepBlock(){$(".step__diff-addres").show(),$(".step__fields").slideDown(),$(".aside__content .address-next-step").show(),$(".step__data").addClass("step__info--hide"),$(".shipping-title").show(),$("html, body").animate({scrollTop:$(".first-step").offset().top-margin},500)}function showSecondStepBlock(){$(".checkout__container").removeClass("hide-second-step"),$(".shipp-info").slideDown(),$("html, body").animate({scrollTop:$(".woocommerce-checkout-review-order").offset().top-margin},1e3)}function secondStep(){var e,t,o,i,s;updateSummary(),pasteShipMethodData(),hideSecondStepBlock(),hideFirstStepBlock(),$(".steps__shipping").addClass("active"),$(".steps__payment").addClass("active"),changeCurrentStepClass(currentStep,"third"),currentStep="third",showThirdStepBlock(),calcCurrentTotalPrice((null===(e=document.querySelector("#asideSumm .totals__item--shipping").dataset)||void 0===e?void 0:e.shipping)||0,(null===(t=document.querySelector("#asideSumm .totals__item--fee"))||void 0===t?void 0:null===(o=t.dataset)||void 0===o?void 0:o.fee)||0,(null===(i=document.querySelector("#asideSumm .totals__item--tax"))||void 0===i?void 0:null===(s=i.dataset)||void 0===s?void 0:s.tax)||0),$(".aside__content #place_order").prop("disabled",!1)}function showThirdStep(){pasteShipMethodData(),hideSecondStepBlock(),showThirdStepBlock(),hideFirstStepBlock(),$(".steps__shipping").addClass("active"),$(".steps__payment").addClass("active"),changeCurrentStepClass(currentStep,"third"),currentStep="third"}function showSecondStep(){pasteShippingData(),hideFirstStepBlock(),showSecondStepBlock(),$(".checkout__container").removeClass("hide-second-step"),$(".steps__shipping").addClass("active"),$(".totals__item--shipping").removeClass("d-none"),$(".totals__item--total").removeClass("d-none"),hideThirdStepBlock(),changeCurrentStepClass(currentStep,"second"),currentStep="second"}function hideSecondStepBlock(){pasteShipMethodData(),$(".info__data").slideDown(),"first"===currentStep?$(".checkout__container").addClass("hide-second-step"):$(".shipp-info").slideDown()}function showThirdStepBlock(){$(".checkout__container").removeClass("hide-third-step"),$(".third-step").slideDown(),$(".checkout__terms").show(),$(".totals__title").show(),$("html, body").animate({scrollTop:$(".woocommerce-checkout-payment").offset().top-margin},1e3)}function hideThirdStepBlock(){$(".third-step").slideUp(),$(".checkout__terms").hide(),$(".totals__title").hide()}function pasteShippingData(){$("#ship-to-different-address-checkbox").prop("checked")?($(".shipping-info__name").text($("[name='shipping_first_name']").val()+" "+$("[name='shipping_last_name']").val()),$(".shipping-info__location").text($("[name='shipping_city']").val()+" "+$("[name='shipping_postcode']").val()+" "+$("[name='shipping_state']").val()+" "+shipping_country||""),$(".shipping-info__street").text($("#shipping_address_1").val()+" "+$("#shipping_address_2").val())):($(".shipping-info__name").text($("[name='billing_first_name']").val()+" "+$("[name='billing_last_name']").val()),$(".shipping-info__location").text($("[name='billing_city']").val()+" "+$("[name='billing_postcode']").val()+" "+$("[name='billing_state']").val()+" "+$("#select2-billing_country-container").text()),$(".shipping-info__street").text($("#billing_address_1").val()+" "+$("#billing_address_2").val())),$(".billing-info__name").text($("[name='billing_first_name']").val()+" "+$("[name='billing_last_name']").val()),$(".billing-info__location").text($("[name='billing_city']").val()+" "+$("[name='billing_postcode']").val()+" "+$("[name='billing_state']").val()+" "+billing_country||""),$(".billing-info__street").text($("#billing_address_1").val()+" "+$("#billing_address_2").val())}function compareShippingFields(){return!$("#ship-to-different-address-checkbox").prop("checked")||$("[name='shipping_first_name']").val()===$("[name='billing_first_name']").val()&&$("[name='billing_city']").val()===$("[name='shipping_city']").val()&&$("[name='shipping_postcode']").val()===$("[name='billing_postcode']").val()&&$("[name='billing_state']").val()===$("[name='shipping_state']").val()&&$("#select2-shipping_country-container").text()===$("#select2-billing_country-container").text()}function changeAddressData(){changeCurrentStepClass(currentStep,"first"),currentStep="first",showFirstStepBlock(),hideThirdStepBlock(),hideSecondStepBlock(),$(".steps__payment").removeClass("active"),$(".steps__shipping").removeClass("active"),$(".aside__content #place_order").prop("disabled",!0)}function changeShippingData(){changeCurrentStepClass(currentStep,"second"),currentStep="second",showSecondStepBlock(),hideThirdStepBlock(),hideFirstStepBlock(),$(".steps__shipping").addClass("active"),$(".steps__payment").removeClass("active"),$(".aside__content #place_order").prop("disabled",!0),calcCurrentTotalPrice(document.querySelector("#asideSumm .totals__item--shipping").dataset.shipping||0,document.querySelector("#asideSumm .totals__item--tax").dataset.tax||0)}function pasteShipMethodData(){var e=document.querySelector(".shipping_method:checked + .custom-control-label .delivery-method");if(!e)return $(".shipp-for-training-text")?void $(".shipp-info__name").html($(".shipp-for-training-text").text()):void 0;var t="";if(null!=e&&e.querySelector(".woocommerce-Price-amount")){var o=e.querySelector(".woocommerce-Price-amount bdi").innerHTML,i=e.childNodes[1].textContent.trim();if(e.querySelector(".shipping_method-description")){var s=e.querySelector(".shipping_method-description").textContent.trim();t="".concat(o,"  ").concat(i,"  <small>").concat(s," </small>")}else t="".concat(o,"  ").concat(i)}else t=e.textContent;$(".shipp-info__name").html(t),$(".shipp-info__desc").text($(".shipping_method:checked + .custom-control-label .delivery__info-text").text())}function changeCurrentStepClass(e,t){checkout.classList.remove("current-step--".concat(e)),checkout.classList.add("current-step--".concat(t))}$("#ship-to-different-address-checkbox").click(function(){1==$(this).prop("checked")?$(".checkout__shipping").slideDown():0==$(this).prop("checked")&&$(".checkout__shipping").slideUp()}),bodyClass("woocommerce-checkout")&&setInterval(function(){$(".input-radio[name='payment_method']").off().change(function(){$(".steps__payment").addClass("active"),jQuery("body").trigger("update_checkout"),$(".aside__content #place_order").prop("disabled",!1)})},500),$("body").on("click","#go_to_step1",function(){return $("#go_to_step2").removeClass("active-step"),$("#go_to_step1").addClass("active-step"),$("#first_step").slideDown(0,function(){$("#order_review").slideUp(200,function(){$("body, html").animate({scrollTop:$("form.checkout").offset().top-50},0)})}),!1}),$("#place_order").click(function(){var e=setTimeout(function(){null!=$(".woocommerce-error").get(0)&&(clearTimeout(e),""!=$(".woocommerce-error").find("li").attr("data-id")&&null!=$(".woocommerce-error").find("li").attr("data-id")&&$("#accordion-step1").slideDown(0,function(){$("#accordion-step2").slideUp(200)}))},100)}),document.querySelector(".mailchimp-newsletter")&&document.querySelector(".mailchimp-newsletter").remove(),document.querySelector(".have-data")&&($(".step__fields").hide(),$(".have-data .step__button").click(function(){showFirstStepBlock()})),$(document).ready(function(){updateSummary()}),jQuery("body").on("updated_checkout",function(){updateSummary()});var ShowMore=function(){function d(e,t,o,i,s,n,r,c,a){var l=this;_classCallCheck(this,d),this.hideMore=c,this.showMore=a,this.cartItemsContainer=e,this.cartItems=t,this.maxItems=isMobile()?o:i,this.showMoreBtn=s,this.showMoreArrow=n,this.showMoreText=r,this.hide=!0,this.showMoreBtn.addEventListener("wc_fragments_refreshed",function(){l.hide?(l.showElements(),l.showMoreArrow.classList.remove("show"),l.showMoreArrow.classList.add("hide"),l.showMore.hide(),l.hideMore.show(),l.hide=!1):(l.hideElements(),l.removeClass(t,"shown-item"),l.showMoreArrow.classList.remove("hide"),l.showMoreArrow.classList.add("show"),l.hideMore.hide(),l.showMore.show(),l.hide=!0)}),this.showMoreBtn.addEventListener("click",function(){l.hide?(l.showElements(),l.showMoreArrow.classList.remove("show"),l.showMoreArrow.classList.add("hide"),l.showMore.hide(),l.hideMore.show(),l.hide=!1):(window.location.href="#firstItem",l.hideElements(),l.removeClass(t,"shown-item"),l.showMoreArrow.classList.remove("hide"),l.showMoreArrow.classList.add("show"),l.hideMore.hide(),l.showMore.show(),l.hide=!0)}),this.hideElements()}return _createClass(d,[{key:"showElements",value:function(){for(var e=this.maxItems;e<this.cartItems.length;e++)this.cartItems[e].style.display="flex",this.cartItems[e].classList.add("shown-item");this.addCartItemBorder(this.cartItems[this.maxItems-1]),this.removeCartItemBorder(this.cartItems[this.cartItems.length-1])}},{key:"removeClass",value:function(e,t){e.forEach(function(e){e.classList.remove(t)})}},{key:"hideElements",value:function(){if(this.cartItems.length>this.maxItems){this.showMoreBtn.style.display="flex",this.hideMore.hide(),this.showMore.show();for(var e=this.maxItems;e<this.cartItems.length;e++)this.cartItems[e].style.display="none",this.cartItems[e].classList.add("hidden-item");this.removeCartItemBorder(this.cartItems[this.maxItems-1])}else this.showMoreBtn.style.display="none"}},{key:"removeCartItemBorder",value:function(e){e.style.borderBottom="none"}},{key:"addCartItemBorder",value:function(e){e.style.borderBottom="1px solid #bbcac8"}}]),d}();if(document.querySelector(".checkout-total__content"))var modalCart=new ShowMore(document.querySelector(".checkout-total__content"),document.querySelectorAll(".checkout-total__item"),5,8,document.querySelector(".checkout-total__content .show-more__btn"),document.querySelector(".checkout-total__content .show-more-arrow "),document.querySelector(".checkout-total__content .show-more__text"),$(".checkout-total__content #hideMore"),$(".checkout-total__content #showMore"));function collectShippingData(){var e=$("form.checkout"),t={};return e.find(".woocommerce-billing-fields").find("input, select").each(function(){t[$(this).attr("name")]=$(this).val()}),$("#ship-to-different-address-checkbox").prop("checked")&&e.find(".woocommerce-shipping-fields").find("input, select").each(function(){console.log("qwe"),t[$(this).attr("name")]=$(this).val()}),t}function saveUserData(){var e=JSON.stringify(collectShippingData());$.ajax({url:wc_add_to_cart_params.ajax_url,type:"POST",data:"action=checkoutState&userData=".concat(e),success:function(e){},error:function(e,t,o){console.log(e.responseText)}})}document.querySelector(".step__fields-save-btn")&&document.querySelector(".step__fields-save-btn").addEventListener("click",function(){$(".step__diff-addres").hide(),$(".step__fields").slideUp(),$(".step__data").removeClass("step__info--hide"),saveUserData()}),jQuery("body").on("updated_checkout",function(){pasteShipMethodData(),$(".checkout__container").hasClass("current-step--third")&&$(".aside__content #place_order").prop("disabled",!1)}),jQuery("body").on("updated_shipping_method",function(){pasteShipMethodData()});var mySavedShippingMethod=$('input[name="shipping_method[0]"]:checked').val();function saveFirstStep(){pasteShippingData(),validateCheckout(secondStep)}jQuery(document).on("updated_checkout",function(){jQuery('input[name="shipping_method[0]"]:checked').val()!==mySavedShippingMethod&&(mySavedShippingMethod=jQuery('input[name="shipping_method"]:checked').val(),$(".checkout__container").hasClass("current-step--second")&&calcCurrentTotalPrice(document.querySelector("#asideSumm .totals__item--shipping").dataset.shipping||0,document.querySelector("#asideSumm .totals__item--tax").dataset.tax||0))}),$(".shipping-info--hide").click(function(){$(this).removeClass("shipping-info--hide")}),document.querySelector(".mailchimp-newsletter")&&document.querySelector(".mailchimp-newsletter").remove(),window.onload=function(){var e=document.querySelector("#billing_phone");document.querySelector("#billing_country_field"),window.intlTelInputGlobals.getInstance(e)};
